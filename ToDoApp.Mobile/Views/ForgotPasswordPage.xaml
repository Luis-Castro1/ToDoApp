<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ToDoApp.Mobile.Views.ForgotPasswordPage"
             xmlns:vm="clr-namespace:ToDoApp.Mobile.Core.Interfaces.ViewModels;assembly=ToDoApp.Mobile.Core"
             xmlns:fa="http://www.aathifmahir.com/dotnet/2022/maui/icons"
             x:DataType="vm:IForgotPasswordViewModel"
             >
    
        <Shell.BackButtonBehavior>
            <BackButtonBehavior IsVisible="true"/>
        </Shell.BackButtonBehavior>

    <ScrollView>


        <Grid RowDefinitions="*">

            <Grid Grid.Row="0" Padding="0,30" RowDefinitions=".5*, .5*" BackgroundColor="{AppThemeBinding Dark=black, Light=white}">


                <Grid.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                        <GradientStop Color="#64B5F6" Offset="0.0" />
                        <!-- Azul más fuerte -->
                        <GradientStop Color="#2196F3" Offset="1.0" />
                        <!-- Azul más claro -->
                    </LinearGradientBrush>
                </Grid.Background>

                <Border Stroke="Transparent" >

                    <Grid RowDefinitions=".5*, .4*" Margin="0,0,0,0">
                        <VerticalStackLayout Margin="0,30,0,0">
                            <Label
                                Text="Encuentra tu cuenta." 
                                FontSize="25"
                                HorizontalTextAlignment="Center" 
                                Margin="0,0,0,10" 
                                TextColor="White"
                                FontAttributes="Bold"
                            />
                            <Label 
                                fa:MauiIcon.Value="{fa:Material Icon=LockReset, FontOverride=True}"
                                FontSize="150"
                                HorizontalTextAlignment="Center"
                                Margin="0,0,0,0"
                                TextColor="White"
                            />
                        </VerticalStackLayout>

                        <Label 
                            Text="Ingresa tu correo electrónico o nombre de usuario." 
                            FontSize="25"
                            FontAttributes="Bold"
                            HorizontalTextAlignment="Center" 
                            Margin="0,30,0,0" 
                            TextColor="White"
                            Grid.Row="1"
                        />

                    </Grid>
                </Border>

                <Grid Grid.Row="1" VerticalOptions="Start" HorizontalOptions="Fill" Padding="30,0">
                    <Border
                    Margin="0,-20,0,0"
                    Padding="15,0"
                    StrokeShape="RoundRectangle 30"
                    BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                    Stroke="Gray">

                        <VerticalStackLayout 
                        HorizontalOptions="Fill" 
                        Padding="0,60"
                        Spacing="40">

                            <Border 
                            StrokeShape="RoundRectangle 20" 
                            Stroke="Transparent" 
                            BackgroundColor="{AppThemeBinding Light=#f2f2f2,Dark=#464646}" >

                                <Grid ColumnDefinitions=".13*, .9*" VerticalOptions="Center" Padding="15,0">
                                    <Label 
                                    VerticalOptions="Center"
                                    Grid.Column="0"
                                    fa:MauiIcon.Value="{fa:FontAwesome Icon=Envelope, FontOverride=True}"
                                    FontSize="25"
                                    TextColor="{AppThemeBinding Light=#8c8c8c, Dark=#C8C8C8}"
                                />

                                    <Entry 
                                    Text="{Binding User}"
                                    Placeholder="Username / Email"
                                    PlaceholderColor="#8c8c8c"
                                    TextColor="{AppThemeBinding Light=black, Dark=white}"
                                    Grid.Column="1"
                                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverterBooleanCoverter}}"
                                />
                                </Grid>
                            </Border>



                            <Grid RowDefinitions="*, .5*" RowSpacing="5">
                                <Border Stroke="Transparent" Margin="0" Grid.Row="0">
                                    <Button Text="Continuar" FontSize="15" 
                                    x:Name="btnLogin"
                                    FontAttributes="Bold" 
                                    HorizontalOptions="CenterAndExpand" 
                                    WidthRequest="200"
                                    HeightRequest="40"
                                    CornerRadius="50"
                                    Command="{Binding SendResetCodeCommand}"
                                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverterBooleanCoverter}}"
                                >
                                        <Button.Background>
                                            <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                                                <GradientStop Color="#2196F3" Offset="0.0" />
                                                <!-- Azul más fuerte -->
                                                <GradientStop Color="#64B5F6" Offset="1.0" />
                                                <!-- Azul más claro -->
                                            </LinearGradientBrush>
                                        </Button.Background>

                                        <Button.Triggers>
                                            <!-- Estado habilitado -->
                                            <Trigger TargetType="Button" Property="IsEnabled" Value="True">
                                                <Setter Property="Background">
                                                    <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                                                        <GradientStop Color="#2196F3" Offset="0.0" />
                                                        <GradientStop Color="#64B5F6" Offset="1.0" />
                                                    </LinearGradientBrush>
                                                </Setter>
                                                <Setter Property="TextColor" Value="White" />
                                            </Trigger>

                                            <!-- Estado deshabilitado -->
                                            <Trigger TargetType="Button" Property="IsEnabled" Value="False">
                                                <Setter Property="Background">
                                                    <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                                                        <GradientStop Color="#BDBDBD" Offset="0.0" />
                                                        <GradientStop Color="#E0E0E0" Offset="1.0" />
                                                    </LinearGradientBrush>
                                                </Setter>
                                                <Setter Property="TextColor" Value="#757575" />
                                            </Trigger>
                                        </Button.Triggers>
                                    </Button>
                                </Border>
                            </Grid>

                        </VerticalStackLayout>

                    </Border>
                </Grid>
            </Grid>
            <BoxView 
                IsVisible="{Binding IsBusy}"
                BackgroundColor="Black"
                Opacity="0.3"
                InputTransparent="True"
                HorizontalOptions="FillAndExpand"
                VerticalOptions="FillAndExpand"
        />

            <ActivityIndicator 
            IsRunning="{Binding IsBusy}" 
            WidthRequest="90" 
            HeightRequest="90"
            VerticalOptions="Center" 
            HorizontalOptions="Center"
            Color="#2196F3"
        />
        </Grid>

    </ScrollView>


</ContentPage>